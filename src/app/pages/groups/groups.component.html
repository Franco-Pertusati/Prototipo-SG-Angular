<head>
  <link rel="stylesheet" href="./groups.component.css">
</head>

<div class="productsMagnament">
  <div class="productsMagnamentNav windowDetails">
    <button class="navBtn" (click)="selectTab('Grupos')">Productos</button>
    <button class="navBtn" (click)="selectTab('Ingredientes')">Ingredientes</button>
    <button class="navBtn" (click)="selectTab('wasd')">Promos</button>
    <button class="navBtn" (click)="selectTab('Ingr')">Descuentos</button>
  </div>
  <div class="productsMagnamentMain">
    @if (selectedTab === 'Grupos') {
    <div class="groupsWindow" class="groupsWindow">
      <div class="productsMagnamentList windowDetails">
        <input class="mb10" type="text" placeholder="Filtrar por grupos">
        @if (groups().length < 1) { <div class="placeholderTutorial">Hola! Antes de empezar, a√±ade un grupo.
      </div>
      }
      @for (group of groups(); track group; let i = $index) {
      <div class="group mb10" [class.unabled]="!group.enabled">
        <!--ITEM DE GRUPO-->
        <span>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
            class="bi bi-caret-right-fill" viewBox="0 0 16 16">
            <path
              d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z" />
          </svg>
        </span>
        @if (group.editingName) {
        <input type="text" [value]="group.name" (keydown.enter)="updateGroupName(i, $event)">
        }
        <p>{{ group.name }}</p>
        <span (click)="changeGroupBool(i)">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
            class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
            <path
              d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0" />
          </svg>
        </span>
        @if (group.optionsDisplayed) {
        <div class="moreGroupOptions windowDetails">
          <button class="listBtn mb10" (click)="activeRenameInput(i);" (click)="changeGroupBool(i)">Renombrar</button>
          <button class="listBtn mb10" (click)="deleteGroup(i)">Eliminar</button>
          <button class="listBtn" (click)="updateGroupDisponibility(i)">@if (!group.enabled) {
            <span>Habilitar</span>
            }@if (group.enabled) {
            <span>Deshabilitar</span>
            }</button>
        </div>
        }
      </div>
      }
    </div>
    <div class="productsMagnamentPanel">
      <div class="windowDetails mb10">
        <p class="mb10">Crear nuevo grupo</p>
        <div class="inputAndConfirm mb10">
          <input type="text" placeholder="Nombre del grupo" [formControl]="newItemNameCtrl"
            (keydown.enter)="changeHandler($event)">
          <button (click)="changeHandler($event)">+</button>
        </div>
      </div>
      <div class="windowDetails">
        <p class="mb10">Crear nuevo producto</p>
        <input type="text" placeholder="Nombre del producto" class="mb10">
        <input type="text" placeholder="Precio del producto" class="mb10">
        <input type="text" placeholder="Costo del producto" class="mb10">
        <input type="text" placeholder="Codigo del producto" class="mb10">
        <select name="" id="" class="mb10">
          @for (group of groups(); track group; let i = $index) {
          <option value="{{i}}">{{group.name}}</option>
          }
        </select>
        <button class="listBtn">Crear</button>
      </div>
    </div>
    <div class="windowDetails codeee">
      {{groups() | json }}
    </div>
  </div>
  }
  @if (selectedTab === 'Ingredientes') {
  <div class="ingredientsWindow" class="groupsWindow">Ingredientes</div>
  }
</div>
</div>